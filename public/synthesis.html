<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI-Based Indian Classical Music Synthesis | Sargam AI</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Serif+Devanagari&family=Poppins:wght@300;400;500;600&family=Cormorant+Garamond:wght@500;600&display=swap"
      rel="google-fonts"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/themes/light.css"
    />
    <script
      type="module"
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.0/cdn/shoelace-autoloader.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/6.6.3/wavesurfer.min.js"></script>

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }

      body {
        background: linear-gradient(
          135deg,
          #0d0d0d 0%,
          #2a1506 50%,
          #3d2207 100%
        );

        color: #f5e6c8;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        position: relative;
        padding: 80px 20px 60px;
      }

      .navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.95),
          rgba(26, 13, 0, 0.95)
        );
        padding: 15px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        box-shadow: 0px 3px 15px rgba(255, 165, 0, 0.3);
        z-index: 1000;
        backdrop-filter: blur(5px);
      }

      .navbar .logo {
        color: #ffa500;
        font-size: 24px;
        font-weight: bold;
        text-decoration: none;
        display: flex;
        align-items: center;
        font-family: "Cormorant Garamond", serif;
        letter-spacing: 1px;
      }

      .logo-icon {
        margin-right: 12px;
        font-size: 28px;
        background: linear-gradient(45deg, #ffa500, #ff5733);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        position: relative;
      }

      .logo-icon::before {
        content: "";
        position: absolute;
        top: -5px;
        left: -5px;
        right: -5px;
        bottom: -5px;
        background: radial-gradient(
          circle,
          rgba(255, 165, 0, 0.2) 0%,
          rgba(255, 165, 0, 0) 70%
        );
        border-radius: 50%;
        z-index: -1;
        animation: pulse 3s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
          opacity: 0.7;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.3;
        }
        100% {
          transform: scale(1);
          opacity: 0.7;
        }
      }

      .menu {
        list-style: none;
        display: flex;
      }

      .menu li {
        margin: 0 18px;
      }

      .menu li a {
        color: #f5e6c8;
        text-decoration: none;
        font-size: 16px;
        transition: 0.3s;
        position: relative;
        padding: 5px 0;
      }

      .menu li a::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 50%;
        background: #ffa500;
        transition: all 0.3s ease;
      }

      .menu li a:hover {
        color: #ffa500;
      }

      .menu li a:hover::after {
        width: 100%;
        left: 0;
      }

      .menu-toggle {
        display: none;
        cursor: pointer;
        font-size: 24px;
        color: #ffa500;
      }

      @media (max-width: 768px) {
        .menu {
          display: none;
          flex-direction: column;
          width: 100%;
          position: absolute;
          top: 70px;
          left: 0;
          background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 0.95),
            rgba(26, 13, 0, 0.95)
          );
          text-align: center;
          border-top: 1px solid rgba(255, 165, 0, 0.3);
          box-shadow: 0 10px 15px rgba(0, 0, 0, 0.8);
        }

        .menu.active {
          display: flex;
        }

        .menu li {
          margin: 18px 0;
        }

        .menu-toggle {
          display: block;
        }
      }

      .container {
        max-width: 850px;
        padding: 35px;
        background: linear-gradient(
          135deg,
          rgba(15, 15, 15, 0.9),
          rgba(30, 20, 10, 0.9)
        );
        border-radius: 20px;
        text-align: center;
        box-shadow: 0px 10px 30px rgba(0, 0, 0, 0.7);
        border: 1px solid rgba(255, 165, 0, 0.3);
        position: relative;
        overflow: hidden;
        opacity: 0;
        animation: fadeIn 1s ease-in-out forwards;
        margin: 0 auto;
      }

      .container::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(
          circle,
          rgba(255, 165, 0, 0.05) 0%,
          rgba(0, 0, 0, 0) 70%
        );
        z-index: -1;
      }

      .floating-notes {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: -1;
        overflow: hidden;
      }

      .note {
        position: absolute;
        color: rgba(255, 165, 0, 0.1);
        font-size: 2rem;
        animation: floating 15s infinite linear;
      }

      @keyframes floating {
        0% {
          transform: translateY(100%) rotate(0deg);
          opacity: 0;
        }
        10% {
          opacity: 0.1;
        }
        90% {
          opacity: 0.1;
        }
        100% {
          transform: translateY(-100%) rotate(360deg);
          opacity: 0;
        }
      }

      .result {
        margin-top: 30px;
        background: linear-gradient(
          135deg,
          rgba(30, 30, 30, 0.4),
          rgba(60, 40, 20, 0.4)
        );
        border-radius: 15px;
        border: 1px solid rgba(255, 165, 0, 0.2);
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5),
          inset 0 0 10px rgba(255, 165, 0, 0.1);
        padding: 25px;
      }

      .result > h2 {
        margin: 10px 0;
        background: linear-gradient(45deg, #ffa500, #ff5733);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-family: "Cormorant Garamond", serif;
        font-size: 28px;
        letter-spacing: 1px;
      }

      audio {
        filter: invert(1) grayscale(100%) brightness(0.75);
        width: 95%;
        margin: 15px 0;
        border-radius: 30px;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      h1 {
        font-size: 32px;
        margin-bottom: 15px;
        background: linear-gradient(45deg, #ffa500, #ff5733);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-family: "Cormorant Garamond", serif;
        letter-spacing: 1px;
        position: relative;
        display: inline-block;
      }

      h1::after {
        content: "";
        position: absolute;
        width: 80%;
        height: 2px;
        bottom: -8px;
        left: 10%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 165, 0, 0.5),
          transparent
        );
      }

      p {
        font-size: 18px;
        opacity: 0.9;
        margin-bottom: 25px;
        line-height: 1.6;
      }

      input {
        padding: 16px;
        background: rgba(2, 1, 1, 0.3);
        border: 1px solid rgba(255, 165, 0, 0.3);
        border-radius: 12px;
        width: 100%;
        color: white;
        font-size: 16px;
        transition: all 0.3s;
      }

      input:focus {
        border-color: #ffa500;
        box-shadow: 0 0 0 2px rgba(255, 165, 0, 0.2);
        outline: none;
      }

      button.primary-btn {
        width: 100%;
        margin-top: 20px;
        padding: 15px;
        border-radius: 12px;
        border: none;
        font-size: 18px;
        background: linear-gradient(90deg, #ff5733, #ff8c00);
        color: white;
        cursor: pointer;
        font-weight: 600;
        transition: 0.3s ease-in-out;
        box-shadow: 0 5px 15px rgba(255, 87, 51, 0.3);
        position: relative;
        overflow: hidden;
        z-index: 1;
      }

      button.primary-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: 0.5s;
        z-index: -1;
      }

      button.primary-btn:hover {
        transform: translateY(-3px);
      }

      button.primary-btn:hover::before {
        left: 100%;
      }

      button.secondary-btn {
        font-size: 16px;
        padding: 12px 20px;
        margin: 10px 5px;
        background: transparent;
        border: 1px solid #ffa500;
        color: #ffa500;
        border-radius: 10px;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      button.secondary-btn:hover {
        background: rgba(255, 165, 0, 0.1);
        transform: translateY(-2px);
      }

      /* Background waves */
      .wave-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        opacity: 0.07;
        pointer-events: none;
      }

      .wave {
        position: absolute;
        width: 100%;
        height: 200px;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23FFA500' d='M0,128L48,138.7C96,149,192,171,288,170.7C384,171,480,149,576,144C672,139,768,149,864,165.3C960,181,1056,203,1152,202.7C1248,203,1344,181,1392,170.7L1440,160L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E")
          repeat-x;
        background-size: 1440px 100%;
      }

      .wave1 {
        bottom: 0;
        animation: wave 30s linear infinite;
      }

      .wave2 {
        bottom: 10%;
        opacity: 0.5;
        animation: wave 20s linear reverse infinite;
      }

      @keyframes wave {
        0% {
          background-position-x: 0;
        }
        100% {
          background-position-x: 1440px;
        }
      }

      /* Shoelace customizations */
      sl-textarea::part(base):focus-within {
        border-color: #ffa500;
        box-shadow: 0 0 0 1px rgba(255, 165, 0, 0.5);
      }

      sl-textarea::part(base) {
        background-color: rgba(10, 10, 10, 0.6);
        border: 1px solid rgba(255, 165, 0, 0.3);
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      sl-textarea::part(textarea) {
        background: transparent;
        color: white;
        padding: 15px;
        font-size: 16px;
      }

      sl-details::part(base) {
        background-color: rgba(10, 10, 10, 0.5);
        border: 1px solid rgba(255, 165, 0, 0.2);
        margin: 15px 0px;
        border-radius: 12px;
        transition: all 0.3s ease;
      }

      sl-details::part(header) {
        padding: 15px;
      }

      sl-details::part(content) {
        padding: 0 15px 15px;
      }

      sl-details::part(summary) {
        color: #ffa500;
        font-weight: 500;
        letter-spacing: 1px;
      }

      .label-on-left {
        --label-width: 4.5rem;
        --gap-width: 1rem;
        margin-bottom: 15px;
      }

      .label-on-left::part(form-control) {
        display: grid;
        grid: auto / var(--label-width) 1fr;
        gap: var(--sl-spacing-3x-small) var(--gap-width);
        align-items: center;
      }

      .label-on-left::part(form-control-label) {
        text-align: right;
        color: #ffa500;
      }

      .label-on-left::part(form-control-help-text) {
        grid-column-start: 2;
      }

      sl-input::part(base):focus-within,
      sl-select::part(base):focus-within {
        border-color: #ffa500;
        box-shadow: 0 0 0 1px rgba(255, 165, 0, 0.5);
      }

      sl-input::part(base),
      sl-select::part(base) {
        background-color: rgba(10, 10, 10, 0.6);
        border-radius: 10px;
        border: 1px solid rgba(255, 165, 0, 0.3);
        padding: 8px;
        transition: all 0.3s ease;
      }

      sl-input::part(input),
      sl-select::part(display-input) {
        background: transparent;
        color: white;
        padding-bottom: 10px;
      }

      sl-select::part(combobox) {
        color: white;
      }

      .two-columns {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      @media (max-width: 650px) {
        .two-columns {
          grid-template-columns: 1fr;
          gap: 15px;
        }
      }

      .sample-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 20px;
        margin: 25px 0;
      }

      .sample-item {
        background: linear-gradient(
          135deg,
          rgba(20, 20, 20, 0.7),
          rgba(40, 30, 20, 0.7)
        );
        border: 1px solid rgba(255, 165, 0, 0.2);
        border-radius: 12px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }

      .sample-item::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 3px;
        background: linear-gradient(to right, #ff5733, #ffa500);
        transform: scaleX(0);
        transform-origin: left;
        transition: transform 0.3s ease;
      }

      .sample-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
        border-color: rgba(255, 165, 0, 0.4);
      }

      .sample-item:hover::after {
        transform: scaleX(1);
      }

      .sample-item h3 {
        font-size: 18px;
        margin-bottom: 10px;
        color: #ffa500;
      }

      .sample-item p {
        font-size: 14px;
        margin: 5px 0;
        opacity: 0.8;
      }

      .waveform {
        background: rgba(20, 20, 20, 0.5);
        border-radius: 12px;
        height: 100px;
        margin: 20px 0;
        border: 1px solid rgba(255, 165, 0, 0.1);
        position: relative;
        overflow: hidden;
      }

      .waveform::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          rgba(255, 165, 0, 0) 0%,
          rgba(255, 165, 0, 0.05) 50%,
          rgba(255, 165, 0, 0) 100%
        );
        animation: waveGlow 2s infinite;
      }

      @keyframes waveGlow {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      .raaga-info {
        background: linear-gradient(
          135deg,
          rgba(20, 20, 20, 0.7),
          rgba(40, 30, 20, 0.7)
        );
        border-radius: 15px;
        padding: 25px;
        margin: 25px 0;
        text-align: left;
        border-left: 3px solid #ffa500;
        position: relative;
        overflow: hidden;
      }

      .raaga-info::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        width: 100px;
        height: 100px;
        background: radial-gradient(
          circle,
          rgba(255, 165, 0, 0.1) 0%,
          rgba(255, 165, 0, 0) 70%
        );
        z-index: 0;
      }

      .raaga-info h3 {
        margin-bottom: 15px;
        color: #ffa500;
        font-size: 22px;
        font-family: "Cormorant Garamond", serif;
        position: relative;
      }

      .raaga-info p {
        font-size: 16px;
        line-height: 1.7;
        position: relative;
        z-index: 1;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
        z-index: 1001;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: linear-gradient(
          135deg,
          rgba(15, 15, 15, 0.95),
          rgba(30, 20, 10, 0.95)
        );
        border-radius: 20px;
        border: 1px solid #ffa500;
        width: 90%;
        max-width: 650px;
        padding: 35px;
        max-height: 85vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
      }

      .close-modal {
        position: absolute;
        top: 20px;
        right: 20px;
        font-size: 28px;
        color: #ffa500;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .close-modal:hover {
        transform: rotate(90deg);
      }

      .active-tab {
        background: rgba(255, 165, 0, 0.15);
        border-bottom: 2px solid #ffa500 !important;
      }

      .tab-buttons {
        display: flex;
        justify-content: center;
        margin: 30px 0;
        border-radius: 12px;
        background: rgba(0, 0, 0, 0.2);
        padding: 5px;
        position: relative;
        overflow: hidden;
      }

      .tab-button {
        background: transparent;
        border: none;
        border-bottom: 2px solid transparent;
        color: #f5e6c8;
        padding: 12px 20px;
        margin: 0;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.3s;
        width: auto;
        position: relative;
        border-radius: 8px;
        z-index: 1;
      }

      .tab-button:hover {
        background: rgba(255, 165, 0, 0.1);
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
        animation: fadeIn 0.5s ease-in-out forwards;
      }

      .footer {
        position: fixed;
        bottom: 0;
        width: 100%;
        background: linear-gradient(
          to right,
          rgba(0, 0, 0, 0.95),
          rgba(26, 13, 0, 0.95)
        );
        color: #f5e6c8;
        text-align: center;
        padding: 15px 0;
        font-size: 14px;
        backdrop-filter: blur(5px);
        box-shadow: 0px -3px 15px rgba(0, 0, 0, 0.5);
      }

      .hidden {
        display: none;
      }

      #warning {
        color: #ff5733;
        font-size: 14px;
        margin-top: 10px;
      }

      #generating {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin: 20px 10px;
        border-top: 1px solid rgba(255, 165, 0, 0.3);
        padding-top: 20px;
      }

      #generating h2 {
        color: #ffa500;
        font-family: "Cormorant Garamond", serif;
      }
    </style>
  </head>
  <body>
    <div class="wave-bg">
      <div class="wave wave1"></div>
      <div class="wave wave2"></div>
    </div>

    <nav class="navbar">
      <a href="#" class="logo"><span class="logo-icon">🎵</span> Sargam AI</a>
      <div class="menu-toggle">☰</div>
      <ul class="menu" id="menu">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../analysis.html">Analysis</a></li>
        <li><a href="../simulation.html">Simulation</a></li>
        <li><a href="../synthesis.html">Synthesis</a></li>
        <li>
          <a href="../Instruments_Data_Base/instruments.html">Instruments</a>
        </li>
        <li><a href="../Library/library.html">Library</a></li>
        <li><a href="../Artists_Data_Base/profiles.html">Artists</a></li>
      </ul>
    </nav>

    <div class="container">
      <div class="floating-notes">
        <span class="note" style="left: 10%; animation-duration: 20s">♪</span>
        <span
          class="note"
          style="left: 30%; animation-duration: 15s; animation-delay: 2s"
          >♫</span
        >
        <span
          class="note"
          style="left: 70%; animation-duration: 18s; animation-delay: 5s"
          >♩</span
        >
        <span
          class="note"
          style="left: 85%; animation-duration: 22s; animation-delay: 8s"
          >♬</span
        >
        <span
          class="note"
          style="left: 45%; animation-duration: 25s; animation-delay: 10s"
          >𝄞</span
        >
      </div>

      <h1>🎵 AI-Based Indian Classical Music Synthesis</h1>
      <p>
        Experience the divine transformation of classical Raagas through
        AI-powered synthesis. Create your own unique compositions with our
        advanced algorithm.
      </p>

      <div class="tab-buttons">
        <button class="tab-button active-tab">Generate Music</button>
        <button class="tab-button">Sample Gallery</button>
        <button class="tab-button">Learn Raagas</button>
      </div>

      <div id="generate-tab" class="tab-content active">
        <!-- prompt -->
        <sl-textarea
          placeholder="Tell us about the music you want (for example, '30 seconds of spiritual Raag Bhairav with sitar and tabla')"
          maxlength="200"
          id="prompt"
          class=""
          required
        ></sl-textarea>

        <!-- Advanced settings -->
        <sl-details>
          <div slot="summary">Advanced Settings</div>

          <div class="two-columns">
            <sl-input
              class="label-on-left"
              id="duration"
              type="number"
              value="30"
              min="10"
              max="120"
            >
              <span slot="label">Duration</span>
              <span slot="suffix">seconds</span>
            </sl-input>

            <sl-input
              class="label-on-left"
              id="tempo"
              type="number"
              value="80"
              min="50"
              max="150"
            >
              <span slot="label">Tempo</span>
              <span slot="suffix">BPM</span>
            </sl-input>

            <sl-input id="mood" class="label-on-left">
              <span slot="label">Mood</span>
            </sl-input>

            <sl-input id="genre" class="label-on-left">
              <span slot="label">Genre</span>
            </sl-input>
          </div>
        </sl-details>

        <!-- Generate button -->
        <button class="primary-btn" id="generate-btn">
          Generate Raaga Composition
        </button>

        <p id="warning" class="hidden"></p>

        <!-- Loading state -->
        <div id="generating" style="display: none" class="hidden">
          <h2>Creating your composition...</h2>
          <sl-spinner
            style="
              font-size: 2rem;
              --track-color: rgba(255, 165, 0, 0.2);
              --indicator-color: #ffa500;
            "
          ></sl-spinner>
        </div>

        <!-- Results section -->
        <div class="result hidden" id="result">
          <h2>Your Unique Composition</h2>
          <div class="waveform" id="waveform"></div>
          <div class="audio-controls">
            <button class="secondary-btn" id="play-btn">
              <sl-icon name="play-fill"></sl-icon> Play
            </button>
            <button class="secondary-btn" id="pause-btn">
              <sl-icon name="pause-fill"></sl-icon> Pause
            </button>
            <button class="secondary-btn" id="download-btn">
              <sl-icon name="download"></sl-icon> Download
            </button>
            <button class="secondary-btn" id="share-btn">
              <sl-icon name="share"></sl-icon> Share
            </button>
          </div>

          <div class="raaga-info hidden">
            <h3>About Your Composition</h3>
            <p id="composition-info">
              This is a unique rendition of <strong>Raag Bhairav</strong>, a
              morning raga known for its spiritual and meditative qualities. The
              composition features sitar as the main instrument supported by
              tabla rhythms. The peaceful mood and moderate tempo create a
              serene atmosphere typical of early morning ragas.
            </p>
          </div>
        </div>
      </div>

      <div id="samples-tab" class="tab-content">
        <h2>Sample Gallery</h2>
        <p>
          Explore our collection of AI-generated Indian classical music
          compositions across different ragas and instruments.
        </p>

        <div class="sample-gallery">
          <div class="sample-item">
            <h3>Morning Bliss</h3>
            <p>Raag: Bhairav</p>
            <p>Instruments: Bansuri, Tabla</p>
            <p>Duration: 45s</p>
          </div>

          <div class="sample-item">
            <h3>Evening Serenity</h3>
            <p>Raag: Yaman</p>
            <p>Instruments: Sitar, Tabla</p>
            <p>Duration: 60s</p>
          </div>

          <div class="sample-item">
            <h3>Midnight Meditation</h3>
            <p>Raag: Malkauns</p>
            <p>Instruments: Sarod, Pakhawaj</p>
            <p>Duration: 90s</p>
          </div>

          <div class="sample-item">
            <h3>Monsoon Melodies</h3>
            <p>Raag: Desh</p>
            <p>Instruments: Santoor, Tabla</p>
            <p>Duration: 75s</p>
          </div>

          <div class="sample-item">
            <h3>Twilight Tunes</h3>
            <p>Raag: Darbari</p>
            <p>Instruments: Violin, Mridangam</p>
            <p>Duration: 60s</p>
          </div>

          <div class="sample-item">
            <h3>Dawn Chorus</h3>
            <p>Raag: Todi</p>
            <p>Instruments: Shehnai, Tabla</p>
            <p>Duration: 45s</p>
          </div>
        </div>
      </div>

      <div id="learn-tab" class="tab-content">
        <h2>Learn About Raagas</h2>
        <p>
          Dive into the rich world of Indian classical raagas and understand
          their unique characteristics and emotional qualities.
        </p>

        <sl-details>
          <div slot="summary">Raag Bhairav - The Morning Raaga</div>
          <div class="raaga-info" style="border: none; padding: 10px 0">
            <p>
              Raag Bhairav is one of the oldest and most fundamental ragas in
              Hindustani classical music, traditionally performed in the early
              morning (6-9 AM). It evokes a feeling of serene devotion and
              spirituality.
            </p>
            <p>
              <strong>Characteristic Notes:</strong> The distinctive feature is
              the flat second (komal re) and natural seventh (shuddha ni) in
              ascent, with a flat seventh (komal ni) in descent.
            </p>
            <p>
              <strong>Mood:</strong> Solemn, meditative, devotional, and
              profound.
            </p>
            <p>
              <strong>Famous Compositions:</strong> "Jago Mohan Pyare" by Pt.
              Bhimsen Joshi, "Man Tadpat Hari Darshan Ko" by Kishori Amonkar.
            </p>
          </div>
        </sl-details>

        <sl-details>
          <div slot="summary">Raag Yaman - The Evening Beauty</div>
          <div class="raaga-info" style="border: none; padding: 10px 0">
            <p>
              Raag Yaman (also known as Kalyan) is a major evening raaga
              performed around sunset (6-9 PM). It's one of the most popular
              raagas for teaching beginners due to its pleasant and uplifting
              nature.
            </p>
            <p>
              <strong>Characteristic Notes:</strong> It uses all natural notes
              except for the sharp fourth (tivra ma).
            </p>
            <p>
              <strong>Mood:</strong> Romantic, peaceful, expansive, and bright.
            </p>
            <p>
              <strong>Famous Compositions:</strong> "Aaye Ho Kahan Se
              Ghanashyam" by Pt. Jasraj, "Jo Bhaje Hari Ko Sada" by Pt. Bhimsen
              Joshi.
            </p>
          </div>
        </sl-details>

        <sl-details>
          <div slot="summary">Raag Malkauns - The Midnight Mystery</div>
          <div class="raaga-info" style="border: none; padding: 10px 0">
            <p>
              Raag Malkauns is a profound midnight raaga (12-3 AM). It's one of
              the oldest raagas in Indian classical music, believed to have the
              power to melt stone.
            </p>
            <p>
              <strong>Characteristic Notes:</strong> It uses only five notes
              (pentatonic scale) with flat third, flat sixth, and flat seventh
              (komal ga, komal dha, komal ni).
            </p>
            <p>
              <strong>Mood:</strong> Deep, intense, mysterious, and
              introspective.
            </p>
            <p>
              <strong>Famous Compositions:</strong> "Bairan Neend Na Aave" by
              Kishori Amonkar, "Ekla Cholo Re" adaptation by Pt. Ajoy
              Chakrabarty.
            </p>
          </div>
        </sl-details>

        <sl-details>
          <div slot="summary">Raag Darbari - The Royal Night</div>
          <div class="raaga-info" style="border: none; padding: 10px 0">
            <p>
              Raag Darbari Kanada originated in the court of Emperor Akbar,
              developed by Tansen. It's traditionally performed late at night (9
              PM-12 AM).
            </p>
            <p>
              <strong>Characteristic Notes:</strong> Features flat third and
              flat seventh (komal ga, komal ni) with distinctive slides (meend)
              on re-ga and dha-ni.
            </p>
            <p>
              <strong>Mood:</strong> Serious, profound, majestic, and
              contemplative.
            </p>
            <p>
              <strong>Famous Compositions:</strong> "Ankhiyan Hari Darshan Ki"
              by Ustad Amir Khan, "Ab Ke Saawan" by Shubha Mudgal.
            </p>
          </div>
        </sl-details>
      </div>
    </div>

    <!-- Raaga Info Modal -->
    <div class="modal" id="raaga-modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 id="modal-title">Raag Bhairav</h2>
        <div id="modal-content">
          <div class="raaga-info" style="border: none; padding: 10px 0">
            <p>
              Raag Bhairav is one of the oldest and most fundamental ragas in
              Hindustani classical music, traditionally performed in the early
              morning (6-9 AM). It evokes a feeling of serene devotion and
              spirituality.
            </p>
            <p>
              <strong>Characteristic Notes:</strong> The distinctive feature is
              the flat second (komal re) and natural seventh (shuddha ni) in
              ascent, with a flat seventh (komal ni) in descent.
            </p>
            <p>
              <strong>Mood:</strong> Solemn, meditative, devotional, and
              profound.
            </p>
            <p>
              <strong>Famous Compositions:</strong> "Jago Mohan Pyare" by Pt.
              Bhimsen Joshi, "Man Tadpat Hari Darshan Ko" by Kishori Amonkar.
            </p>
            <p><strong>Time of Day:</strong> Early morning (6-9 AM)</p>
            <p>
              <strong>Suitable Instruments:</strong> Sitar, Bansuri, Sarod,
              Violin
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Tab switching functionality
      const tabButtons = document.querySelectorAll(".tab-button");
      const tabContents = document.querySelectorAll(".tab-content");

      tabButtons.forEach((button, index) => {
        button.addEventListener("click", () => {
          // Remove active class from all buttons
          tabButtons.forEach((btn) => btn.classList.remove("active-tab"));

          // Add active class to clicked button
          button.classList.add("active-tab");

          // Hide all tab contents
          tabContents.forEach((content) => content.classList.remove("active"));

          // Show the corresponding tab content
          tabContents[index].classList.add("active");
        });
      });

      // Mobile menu toggle
      const menuToggle = document.querySelector(".menu-toggle");
      const menu = document.querySelector("#menu");

      menuToggle.addEventListener("click", () => {
        menu.classList.toggle("active");
      });

      // Raaga info modal functionality
      const raagas = {
        bhairav: {
          name: "Raag Bhairav",
          description:
            "One of the oldest and most fundamental ragas in Hindustani classical music, traditionally performed in the early morning (6-9 AM). It evokes a feeling of serene devotion and spirituality.",
          notes:
            "The distinctive feature is the flat second (komal re) and natural seventh (shuddha ni) in ascent, with a flat seventh (komal ni) in descent.",
          mood: "Solemn, meditative, devotional, and profound.",
          compositions:
            '"Jago Mohan Pyare" by Pt. Bhimsen Joshi, "Man Tadpat Hari Darshan Ko" by Kishori Amonkar.',
          time: "Early morning (6-9 AM)",
          instruments: "Sitar, Bansuri, Sarod, Violin",
        },
        yaman: {
          name: "Raag Yaman",
          description:
            "Also known as Kalyan, it is a major evening raaga performed around sunset (6-9 PM). It's one of the most popular raagas for teaching beginners due to its pleasant and uplifting nature.",
          notes:
            "It uses all natural notes except for the sharp fourth (tivra ma).",
          mood: "Romantic, peaceful, expansive, and bright.",
          compositions:
            '"Aaye Ho Kahan Se Ghanashyam" by Pt. Jasraj, "Jo Bhaje Hari Ko Sada" by Pt. Bhimsen Joshi.',
          time: "Evening (6-9 PM)",
          instruments: "Sitar, Santoor, Bansuri, Sarod",
        },
        malkauns: {
          name: "Raag Malkauns",
          description:
            "A profound midnight raaga (12-3 AM). It's one of the oldest raagas in Indian classical music, believed to have the power to melt stone.",
          notes:
            "It uses only five notes (pentatonic scale) with flat third, flat sixth, and flat seventh (komal ga, komal dha, komal ni).",
          mood: "Deep, intense, mysterious, and introspective.",
          compositions:
            '"Bairan Neend Na Aave" by Kishori Amonkar, "Ekla Cholo Re" adaptation by Pt. Ajoy Chakrabarty.',
          time: "Midnight (12-3 AM)",
          instruments: "Sarod, Sarangi, Violin, Sitar",
        },
        // Add more raagas as needed
      };

      const modal = document.getElementById("raaga-modal");
      const modalTitle = document.getElementById("modal-title");
      const modalContent = document.getElementById("modal-content");
      const closeModal = document.querySelector(".close-modal");
      const raagaSelect = document.getElementById("raaga-select");
      const learnRaagaBtn = document.querySelector(".secondary-btn");

      function openRaagaModal(raagaKey) {
        const raaga = raagas[raagaKey] || raagas.bhairav;

        modalTitle.textContent = raaga.name;
        modalContent.innerHTML = `
          <div class="raaga-info" style="border: none; padding: 10px 0;">
            <p>${raaga.description}</p>
            <p><strong>Characteristic Notes:</strong> ${raaga.notes}</p>
            <p><strong>Mood:</strong> ${raaga.mood}</p>
            <p><strong>Famous Compositions:</strong> ${raaga.compositions}</p>
            <p><strong>Time of Day:</strong> ${raaga.time}</p>
            <p><strong>Suitable Instruments:</strong> ${raaga.instruments}</p>
          </div>
        `;

        modal.style.display = "flex";
      }

      learnRaagaBtn.addEventListener("click", () => {
        const selectedRaaga = raagaSelect.value || "bhairav";
        openRaagaModal(selectedRaaga);
      });

      closeModal.addEventListener("click", () => {
        modal.style.display = "none";
      });

      window.addEventListener("click", (event) => {
        if (event.target === modal) {
          modal.style.display = "none";
        }
      });

      // Generate music functionality
      const generateBtn = document.getElementById("generate-btn");
      const generatingDiv = document.getElementById("generating");
      const resultDiv = document.getElementById("result");
      const prompt = document.getElementById("prompt");
      const duration = document.getElementById("duration");
      const genre = document.getElementById("genre");
      const mood = document.getElementById("mood");
      const tempo = document.getElementById("tempo");
      const warning = document.getElementById("warning");

      let wavesurfer;

      generateBtn.addEventListener("click", async () => {
        // Validate input
        if (!prompt.value) {
          warning.textContent = "Please enter a prompt";
          warning.classList.remove("hidden");
          return;
        }

        const trackMeta = {
          prompt: { text: prompt.value },
          duration: parseInt(duration.value) * 1000 || 60000,
          genre: genre.value || "indian classical music",
          mood: mood.value || "spiritual",
          tempo: `${tempo.value || 80} BPM`,
        };

        const baseUrl = `http://localhost:8888/api/synthesis`;

        try {
          warning.classList.add("hidden");
          show(generatingDiv);
          resultDiv.classList.add("hidden");

          const response = await fetch(`${baseUrl}`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(trackMeta),
          });

          if (!response.ok) throw new Error("Failed to generate music");

          const data = await response.json();
          console.log("Music generated:", data);

          // Fetch the base64 audio data
          const audioResponse = await fetch(
            `http://localhost:8888${data.trackUrl}`
          );
          if (!audioResponse.ok) throw new Error("Failed to fetch audio");

          const audioData = await audioResponse.json();
          console.log("Audio data size:", audioData.size);

          // Convert base64 back to blob
          const binaryString = atob(audioData.audio);
          const bytes = new Uint8Array(binaryString.length);
          for (let i = 0; i < binaryString.length; i++) {
            bytes[i] = binaryString.charCodeAt(i);
          }

          const blob = new Blob([bytes], { type: audioData.mimeType });
          console.log("Blob type:", blob.type, "Blob size:", blob.size);

          hide(generatingDiv);
          resultDiv.classList.remove("hidden");

          // Create wavesurfer instance
          if (wavesurfer) {
            wavesurfer.destroy();
          }

          wavesurfer = WaveSurfer.create({
            container: "#waveform",
            waveColor: "#FFA50066",
            progressColor: "#FFA500",
            cursorColor: "#FFFFFF",
            barWidth: 2,
            barRadius: 3,
            cursorWidth: 1,
            height: 100,
            barGap: 2,
          });

          wavesurfer.on("ready", () => {
            console.log("Wavesurfer ready");
          });

          wavesurfer.on("error", (error) => {
            console.error("Wavesurfer error:", error);
          });

          wavesurfer.loadBlob(blob);

          hide(generating);
          resultDiv.classList.remove("hidden");
        } catch (error) {
          console.log(error);
        }

        // // Simulate API call with setTimeout
        // setTimeout(() => {
        //   hide(generatingDiv);
        //   resultDiv.classList.remove("hidden");

        //   // Create wavesurfer instance
        //   if (wavesurfer) {
        //     wavesurfer.destroy();
        //   }

        //   wavesurfer = WaveSurfer.create({
        //     container: "#waveform",
        //     waveColor: "#FFA50066",
        //     progressColor: "#FFA500",
        //     cursorColor: "#FFFFFF",
        //     barWidth: 2,
        //     barRadius: 3,
        //     cursorWidth: 1,
        //     height: 100,
        //     barGap: 2,
        //   });

        //   // Load sample audio
        //   wavesurfer.load(
        //     "https://github.com/rafaelreis-hotmart/Audio-Sample-files/raw/master/sample.mp3"
        //   );

        //   // Update composition info based on selections
        //   const selectedRaaga = raagaSelect.value || "bhairav";
        //   const raagaInfo = raagas[selectedRaaga] || raagas.bhairav;
        //   const mainInstrument =
        //     document.getElementById("main-instrument").value || "sitar";
        //   const rhythmInstrument =
        //     document.getElementById("rhythm-instrument").value || "tabla";
        //   const mood = document.getElementById("mood").value || "peaceful";

        //   compositionInfo.innerHTML = `
        //     This is a unique rendition of <strong>${raagaInfo.name}</strong>, ${
        //     raagaInfo.description.split(".")[0]
        //   }.
        //     The composition features ${mainInstrument} as the main instrument supported by ${rhythmInstrument} rhythms.
        //     The ${mood} mood and moderate tempo create a ${
        //     mood === "peaceful"
        //       ? "serene"
        //       : mood === "spiritual"
        //       ? "divine"
        //       : mood === "melancholic"
        //       ? "reflective"
        //       : "vibrant"
        //   }
        //     atmosphere typical of ${raagaInfo.time.toLowerCase()} ragas.
        //   `;
        // }, 3000);
      });

      // Audio controls
      document
        .getElementById("play-btn")
        .addEventListener("click", function () {
          if (wavesurfer) {
            wavesurfer.play();
          }
        });

      document
        .getElementById("pause-btn")
        .addEventListener("click", function () {
          if (wavesurfer) {
            wavesurfer.pause();
          }
        });

      document
        .getElementById("download-btn")
        .addEventListener("click", function () {
          alert("Download functionality would be implemented here.");
        });

      document
        .getElementById("share-btn")
        .addEventListener("click", function () {
          alert("Share functionality would be implemented here.");
        });

      function hide(element) {
        if (element) element.style.display = "none";
      }

      function show(element) {
        if (element) element.style.display = "block";
      }
    </script>
  </body>
</html>
